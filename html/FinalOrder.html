<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Set Order | Stuffington</title>
    <!-- Link to favicon -->
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <!-- Link to external style sheet -->
    <link rel="stylesheet" type="text/css" href="../css/navigation.css">
    <link rel="stylesheet" type="text/css" href="../css/CategoryStyle.css">
    <link rel="stylesheet" type="text/css" href="../css/CartStyle.css">
    <link rel="stylesheet" type="text/css" href="../css/finalOrder.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <div class="navigationContainer">
        <!-- Navigation section -->
        <ul class="navbar">
            <li><a href="index.html"><img src="../images/Stuffed.png"></a></li>
            <li><input type="search" id="searchbar" class="searchbar" placeholder="Search.."></li>
            <li style="float:right"><a href="cart.html">🛒</a></li>
            <li style="float:right"><a href="profile.html">👤</a></li>
            <li style="float:right"><a href="login.html">SIGN IN</a></li>
            <li style="float:right"><a href="aboutUs.html">ABOUT US</a></li>
        </ul>
        <ul class="categoryNavbar">
            <li><a href="allproducts.html">All Products</a></li>
            <li><a href="allproducts.html?category=Teddy Bear">Teddy Bear</a></li>
            <li><a href="allproducts.html?category=House Pets">House Pets</a></li>
            <li><a href="allproducts.html?category=Mythical">Mythical</a></li>
        </ul>
    </div>

    <!-- Content of the Page-->

    <!--Headers-->
    <h1 style="margin-left: 3%; font-size: 35pt; display: inline-flex;"> Review Order </h1>
    <h1 style=" font-size: 35pt;float: right;margin-right: 23%; margin-bottom: 10px;"> Shipping Address </h1>


    <!--Cart display on the left that shows what product are about to be placed for order-->
    <div style="display: flex;">
        <div class="cartDisplayContainer" id="cartDisplayContainer">
            <!-- <div class="sideCart">
                <div class="itemImage">
                    <img src="../images/StuffedToys/BrownBear.jpg" alt="BrownBear">
                </div>
                <div class="itemText">
                    <h1>Brown Bear</h1>
                    <p class="price">AED70.90</p>
                    <p style="float:right; font-size: xx-large;">x2</p>
                </div>
            </div>

            <div class="sideCart">
                <div class="itemImage">
                    <img src="../images/StuffedToys/BlackDragon.jpg" alt="BlackDragon">
                </div>
                <div class="itemText">
                    <h1>Black Dragon</h1>
                    <p class="price">AED75.00</p>
                    <p style="float:right; font-size: xx-large;">x1</p>
                </div>
            </div> -->


        </div>

        <!--A div that contains input fields that retrieves address and contact information from the user who ordered-->
        <div style="display: block; width: 47%;">

            <div class="sideAddressContainer">

                <p style="float: left;"> Building No, Flat no, Area </p>
                <p style="float: left; margin-left: 170px ;"> Street </p>
                <input type="text" class="basicAddress" placeholder="Building No / Flat no / Area " required>
                <input type="text" class="street" placeholder="Street" required>

                <p style="float: left; margin-right: 100px;"> Emirate </p>
                <p style="float: left; margin-left: 170px ;"> Contact Number </p>
                <select class="emirate" style="float: left; margin-left: 16px ;" required>
                    <option value="" disabled selected hidden>-Select-</option>
                    <option value="text" selected="selected"> Abu Dhabi </option>
                    <option value="text">Dubai</option>
                    <option value="text">Sharjah</option>
                    <option value="text">Ajman</option>
                    <option value="text">Ras Al Khaimah</option>
                    <option value="text">Umm Al-Quwain</option>
                    <option value="text">Fujairah</option>
                </select>
                <input type="tel" class="phoneNum" placeholder="05-/---/----" style="float: left; margin-left: 135px ;"
                    required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">
            </div>

            <!--A div that would let the user to select a delivery option-->
            <h1 style=" font-size: 35pt; margin-left: 9%; margin-top: 9%;"> Delivery Option </h1>
            <div class="sideDeliveryContainer">
                <div class="sideDelivery">
                    <input type="radio" name="deliver" value="deliver" class="radio">
                    <label for="deliver" class="deliveryText"> Ship to my address.</label><br>
                    <span>
                        <p style="margin-top: 0; float: left; margin-left: 55px; width: 100%;">Your order will be
                            delivered
                            straight to your door-step.</p>
                    </span>

                    <input type="radio" name="deliver" value="deliver" class="radio">
                    <label for="deliver" class="deliveryText"> Deliver to a nearby Stuffington Store</label><br>
                    <span>
                        <p style="margin-top: 0; float: left; margin-left: 50px; margin-right: 50px;">You will be able
                            to
                            collect your order from the nearest Stuffington Store from the address you have provided.
                        </p>
                    </span>
                </div>
            </div>

            <!--A div that will display the final amount and a button for order submission-->
            <div class="placeOrderContainer">
                <div class="amount">
                    <div class="totalPrice" style="float: left;"> &nbsp;&nbsp;</div>
                    <div class="totalPrice" style="float: right;" id="totalPriceContent"> 216.90&nbsp;&nbsp;</div>
                </div>
                <div class="placeOrderBtn">
                    <a href="orderPlaced.html"><button> Place Order </button></a>
                </div>
                <div style=" font-size: larger;margin-left: 4%;">
                    <p style="margin-top: -5px;">Total Amount (VAT inclusive)</p>
                </div>
            </div>

        </div>
    </div>

    <!-- js for searchbar functionality -->
    <script type="module">
        "use strict"
        //Import recommender class
        import { Recommender } from '../js/searchbar.js';

        //Create recommender object - it loads its state from session storage
        let recommender = new Recommender();

        //searchbar functionality
        let searchBar = document.getElementById("searchbar");
        searchBar.onsearch = function(){
            //add keyword to sessionStorage
            recommender.addKeyword(searchBar.value);
            //display searched product
            recommender.search();
        }

        window.onload=displayCart;
        function displayCart() {
            let sideCartDisplay = document.getElementById("cartDisplayContainer");

            if(sessionStorage.Cart=== undefined || sessionStorage.Cart === "[]"){
                sideCartDisplay.innerText = "NO ITEMS IN CART";
                return;
            }
            let productList = JSON.parse(sessionStorage.allProducts);
            
            let cartList = JSON.parse(sessionStorage.Cart);
            let total = 0;
            let tableStr = "";
            let sideCartStr = "";
            

            for (let i = 0; i < cartList.length; i++) {
                for (let j = 0; j < productList.length; j++) {
                    if (cartList[i].id == productList[j]._id.$oid) {
                        sideCartStr += "<div class='sideCart'>";
                        sideCartStr += "<div class='itemImage'>";
                        sideCartStr += '<img src = "' + productList[j].image_url + '" alt = "' + productList[j].name + '" >';
                        sideCartStr += '</div>';
                        sideCartStr += '<div class="itemText">';
                        sideCartStr += '<h1>' + productList[j].name + '</h1>';
                        sideCartStr += '<p class="price">AED ' + productList[j].price.toFixed(2) + '</p>';
                        sideCartStr += '<h4 style="margin-top:0;">Size : ' + productList[j].size + ' Inches</h4>';
                        sideCartStr += '<p style="float:right; font-size: xx-large;">x' + cartList[i].qty + '</p>';
                        // sideCartStr += '<p><select style="width: 8%; text-align: center;" onchange=\'change("'+cartList[i].id+'",this.options[this.selectedIndex].text)\'>';
                        // for (let k = 1; k < 11; k++) {
                        //     if (k == cartList[i].qty) {
                        //         sideCartStr += '<option value="#" selected="selected">' + k + '</option>';
                        //         continue;
                        //     }
                        //     sideCartStr += '<option value="#">' + k + '</option>';
                        // }
                        // sideCartStr += '</select></p>';
                        // sideCartStr += '<button style="float:right; left: 100%;" onclick=\'deleteProduct("'+cartList[i].id+'")\'>Remove</button>';
                        sideCartStr += '</div>';
                        sideCartStr += '</div>';
                        total += cartList[i].qty * productList[j].price;
                    }
                }
            }
            sideCartDisplay.innerHTML = sideCartStr;
            document.getElementById("totalPriceContent").innerHTML = total.toFixed(2)+ " AED&nbsp;&nbsp;&nbsp;";

        }
    </script>
    
    <!--Footer-->
    <footer>
        <p>©️ 2023 - STUFFINGTON - All Rights Reserved</p>
    </footer>

</body>

</html>