<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Customer | CMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- custom stylesheet -->
  <link rel="stylesheet" href="../CSS/styles.css">
  <link rel="stylesheet" href="../CSS/navigation.css">
  <link rel='stylesheet' href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css'>

  <!-- Link to favicon -->
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
  

<body>

  <div class="bg-image">

    <div class="title">
      <h1>Customer Information</h1>
    </div>


  <!-- navigation bar -->
  <div class="sidebar close">
    <div class="logo-details">
      <!-- redirct to main.html 'onclick' = logo -->
      <a href="main.html">
        <img src="../images/bear.png" style="width: 40px; margin-left:22px">
        <span class="logo_name">StuffingTon</span>
    </div>


    <ul class="nav-links">
      <!--StuffingTon-->
      <li>
        <div class="iocn-link">
          <a href="product.html">
            <i class='bx bx-collection'></i>
            <!-- category : product -->
            <span class="link_name">Product</span>
          </a>
          <i class='bx bxs-chevron-down arrow'></i>
        </div>
        <ul class="sub-menu">
          <!-- dropdown menu for product category -->
          <li><a class="link_name" href="product.html">Product</a></li>
          <li><a href="add.html">Add Product</a></li>
        </ul>
      </li>

      <!-- Customer -->
      <li>
        <div class="iocn-link">
          <a href="customer.html">
            <i class='bx bx-collection'></i>
            <!-- category : customer -->
            <span class="link_name">Customer</span>
          </a>
          <i class='bx bxs-chevron-down arrow'></i>
        </div>

        <ul class="sub-menu">
          <li><a class="link_name" href="product.html">Customer</a></li>
        </ul>
      </li>

      <!-- Order history -->
      <li>
        <div class="iocn-link">
          <a href="order.html">
            <i class='bx bx-collection'></i>
            <!-- category : order -->
            <span class="link_name">Orders</span>
          </a>
          <i class='bx bxs-chevron-down arrow'></i>
        </div>

        <ul class="sub-menu">
          <li><a class="link_name" href="product.html">Order</a></li>
        </ul>
      </li>

      <!-- Admin -->
      <li>
        <div class="iocn-link">
          <a href="#">
            <i class='bx bx-collection'></i>
            <span class="link_name"></span>
            <i class='bx bxs-chevron-down arrow'></i>
        </div>
        <ul class="sub-menu">
          <!-- Admin -->
          <li><a class="link_name" href="#">StuffingTon Admin</a></li>
          <li><a href="#">Aqeel Aman Ali - M00850498</a></li>
          <li><a href="#">Kurt Patawaran - M00850500</a></li>
          <li><a href="#">Hooda AbdulShakoor - M00849592</a></li>
        </ul>
      </li>

    </ul>
  </div>



  <!-- customer details table -->
   <table class="table" style="width: fit-content; display: table-caption; margin-left: 45%;">

    <thead>
    <!-- columns -->
      <th>Customer ID</th>
      <th>Name</th>  
      <th>DOB</th>                
      <th>Email Address</th>  
    </thead>

    <tbody id="displayTable">
    <!-- details -->
	    <!-- <tr>
       <td data-Label="Customer ID">0038193</td>
       <td data-label="Name">Marry</td>
       <td data-label="DOB">07/07/2003</td>
       <td data-label="Phone Number">+971 54 3598368</td>
       <td data-label="Email Address">mv_2348@gmail.com</td>
       <td data-label="Shipping Address">Al Barsha, Dubai</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">0038164</td>
       <td data-label="Name">Zara</td>
       <td data-label="DOB">02/12/1999</td>
       <td data-label="Phone Number">+971 55 2948104</td>
       <td data-label="Email Address">zbs_2348@gmail.com</td>
       <td data-label="Shipping Address">Dubailand, Dubai</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>
     
     <tr>
      <td data-Label="Customer ID">0082683</td>
       <td data-label="Name">Jackson</td>
       <td data-label="DOB">30/06/2000</td>
       <td data-label="Phone Number">+971 55 3499173</td>
       <td data-label="Email Address">jackm234@outlook.com</td>
       <td data-label="Shipping Address">Marsa Dubai</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">9638193</td>
       <td data-label="Name">Zania</td>
       <td data-label="DOB">12/01/2006</td>
       <td data-label="Phone Number">+971 50 1038924</td>
       <td data-label="Email Address">zan_2348@gmail.com</td>
       <td data-label="Shipping Address">Al Barsha, Dubai</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">0034443</td>
       <td data-label="Name">Mehvish</td>
       <td data-label="DOB">20/12/2002</td>
       <td data-label="Phone Number">+971 56 2973952</td>
       <td data-label="Email Address">meh345@gmail.com</td>
       <td data-label="Shipping Address">Business Bay</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">9018493</td>
       <td data-label="Name">Gorge</td>
       <td data-label="DOB">23/03/2003</td>
       <td data-label="Phone Number">+971 50 9927491</td>
       <td data-label="Email Address">gomez_gorge@yahoo.com</td>
       <td data-label="Shipping Address">Jumeirah Village Circle</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">9028945</td>
       <td data-label="Name">Joe</td>
       <td data-label="DOB">19/06/2003</td>
       <td data-label="Phone Number">+971 54 4449274</td>
       <td data-label="Email Address">J0e8@gmail.com</td>
       <td data-label="Shipping Address">Jumeirah Lakes and Towers</td>
       <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">0000378</td>
       <td data-label="Name">Noah</td>
       <td data-label="DOB">10/10/1998</td>
       <td data-label="Phone Number">+971 56 7802859</td>
       <td data-label="Email Address">noahmaghen@gmail.com</td>
      <td data-label="Shipping Address">Reva Residences</td>
      <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">8918357</td>
       <td data-label="Name">Emma</td>
       <td data-label="DOB">24/10/1999</td>
       <td data-label="Phone Number">+971 54 3927490</td>
       <td data-label="Email Address">emmajames@outlook.com</td>
      <td data-label="Shipping Address">Dubailand</td>
      <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
      <td data-Label="Customer ID">1118947</td>
       <td data-label="Name">Brian</td>
       <td data-label="DOB">15/09/2001</td>
       <td data-label="Phone Number">+971 58 3591837</td>
       <td data-label="Email Address">brianadams@gmail.com</td>
      <td data-label="Shipping Address">Majaz Waterfront</td>
      <td data-Label="Delete Customer"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr> -->

    </tbody>

  </table>

  <script type="module">

    let container = document.getElementById("displayTable");
    window.onload = init;

  //Downloads JSON description of products from server
    function init() {
      //Create request object 
      let request = new XMLHttpRequest();

      //Create event handler that specifies what should happen when server responds
      request.onload = () => {

        //Check HTTP status code
        if (request.status === 200) {
          ;
          displayCustomers(request.responseText);
        }
        else
          alert("Error communicating with server: " + request.status);
      };

      //Set up request and send it
      request.open("GET", "../php/view_customer.php");
      request.send();
    }


    function displayCustomers(jsonCustomers) {
      //Convert JSON to array of product objects
      let custArray = JSON.parse(jsonCustomers);
      console.log(custArray);
      let htmlStr = "";

      //Create HTML div containing product data
      for (let i = 0; i < custArray.length; i++) {
        htmlStr += '<tr>';
        htmlStr += '<td style="width:100px;" data-label="CustomerID">' + custArray[i]._id.$oid + '</td>';
        htmlStr += '<td data-label="Name">' + custArray[i].name + '</td>';
        htmlStr += '<td data-label="DOB">' + custArray[i].dob + '</td>';
        htmlStr += '<td data-label="Email Address">' + custArray[i].email + '</td>';
        htmlStr += '</tr>';
      }

      container.innerHTML = htmlStr;
      // var elements = document.getElementsByClassName("cancel_customer");
      for (var i = 0; i < elements.length; i++) {
        // elements[i].addEventListener('click', removeProduct);
      }
    }


  // function removeProduct(selector) {

  //     var data = selector.currentTarget.dataset;

  //     let request = new XMLHttpRequest();

  //     //Create event handler that specifies what should happen when server responds
  //     request.onload = () => {
  //       //Check HTTP status code
  //       debugger;
  //       if (request.status === 200) {
  //         ;

  //       }
  //       else
  //         alert("Error communicating with server: " + request.status);
  //     };

  //     debugger;
  //     //Set up request and send it
  //     var data = {
  //       id: data.id

  //     };

  //     var id = data.id;
  //     request.open("POST", "../php/remove-product.php");

  //     request.send(id);
  // }


    //Create event handler that specifies what should happen when server responds
    request.onload = () => {
        //Check HTTP status code
        
        if (request.status === 200) {;
          
        }
        else
            alert("Error communicating with server: " + request.status); 
    };
    //Set up request and send it
    var data={
      id:data.id
    };
    var id = data.id;
    // request.open("POST", "../php/remove-product.php");
             
    request.send(id);

  </script>

  
  </div>






<script src='../JS/navigation.js'></script>


</body>
</html>