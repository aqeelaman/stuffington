<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Order | CMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- custom css -->
  <link rel="stylesheet" href="../CSS/styles.css">
  <link rel="stylesheet" href="../CSS/navigation.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

  <!-- Link to favicon -->
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
  

<body>

  <div class="bg-image">
    <div class="title">
    <h1>Order History</h1>
  </div>


 <!-- navigation bar -->
  <div class="sidebar close">
    <div class="logo-details">
      <!-- redirct to main.html 'onclick' = logo -->
      <a href="main.html">
      <img src="../images/bear.png" style="width: 40px; margin-left:22px">
      <span class="logo_name">StuffingTon</span>
    </div>


    <ul class="nav-links">
      <!--StuffingTon-->
      <li>
        <div class="iocn-link">
          <a href="product.html">
            <i class='bx bx-collection' ></i>
            <!-- category : product -->
            <span class="link_name">Product</span>
          </a>
          <i class='bx bxs-chevron-down arrow' ></i>
        </div>
        <ul class="sub-menu"> 
          <!-- dropdown menu for product category -->
          <li><a class="link_name" href="product.html">Product</a></li>
          <li><a href="add.html">Add Product</a></li>
          <li><a href="modify.html">Modify Details</a></li>
        </ul>
      </li>

      <!-- Customer -->
      <li>
        <div class="iocn-link">
          <a href="customer.html">
            <i class='bx bx-collection' ></i>
            <!-- category : customer -->
            <span class="link_name">Customer</span>
          </a>
          <i class='bx bxs-chevron-down arrow' ></i>
        </div>

        <ul class="sub-menu">
          <li><a class="link_name" href="product.html">Customer</a></li>
        </ul>
      </li>

      <!-- Order history -->
      <li>
        <div class="iocn-link">
          <a href="order.html">
            <i class='bx bx-collection' ></i>
            <!-- category : order -->
            <span class="link_name">Orders</span>
          </a>
          <i class='bx bxs-chevron-down arrow' ></i>
        </div>

        <ul class="sub-menu">
          <li><a class="link_name" href="product.html">Order</a></li>
        </ul>
      </li>

      <!-- Admin -->
      <li>
        <div class="iocn-link">
          <a href="#">
            <i class='bx bx-collection' ></i>
            <span class="link_name"></span>
          <i class='bx bxs-chevron-down arrow' ></i>
        </div>
        <ul class="sub-menu">
          <!-- Admin -->
          <li><a class="link_name" href="#">StuffingTon Admin</a></li>
          <li><a href="#">Aqeel Aman Ali - M00850498</a></li>
          <li><a href="#">Kurt Patawaran - M00850500</a></li>
          <li><a href="#">Hooda AbdulShakoor - M00849592</a></li>
        </ul>
      </li> 

    </ul>
  </div>


    <!-- Order History -->
   <table class="table">

    <thead>
      <th>Customer ID</th>  
      <th>Order ID</th> 
      
      <th>Shipping Address</th>
      <th>Date</th>
      <th>Time</th>
      <th>Price</th> 
      <th>Products</th>  
      <th>Cancel Order</th>
    </thead>

    <tbody id="displayTable">
	    <!-- <tr>
       <td data-label="Order ID">7920847</td>
       <td data-label="Product ID">T90278</td>
       <td data-label="Product Name">Black Bear</td>
       <td data-label="Quantity">02</td>
       <td data-label="Price">62.00</td>
       <td data-label="Customer ID">8928567</td>
       <td data-Label="Time">19:00</td>
       <td date-Label="Date">23/06/2020</td>
       <td data-label="Shipping Address">Al Barsha, Dubai</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
      </tr>

	    <tr>
       <td data-label="Order ID">8927834</td>
       <td data-label="Product ID">H20993</td>
       <td data-label="Product Name">Brown Bunny</td>
       <td data-label="Quantity">05</td>
       <td data-label="Price">30.50</td>
       <td data-label="Customer ID">1093782</td>
       <td data-Label="Time">9:45</td>
       <td date-Label="Date">10/02/2021</td>
       <td data-label="Shipping Address">Dubailand, Dubai</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>
     
     <tr>
       <td data-label="Order ID">9027834</td>
       <td data-label="Product ID">T90278</td>
       <td data-label="Product Name">Black Bear</td>
       <td data-label="Quantity">10</td>
       <td data-label="Price">85.00</td>
       <td data-label="Customer ID">9993782</td>
       <td data-Label="Time">24:00</td>
       <td date-Label="Date">30/04/2023</td>
       <td data-label="Shipping Address">Marsa Dubai</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">0004782</td>
       <td data-label="Product ID">M44468</td>
       <td data-label="Product Name">White Unicorn</td>
       <td data-label="Quantity">04</td>
       <td data-label="Price">100</td>
       <td data-label="Customer ID">2003945</td>
       <td data-Label="Time">14:20</td>
       <td date-Label="Date">28/02/2020</td>
       <td data-label="Shipping Address">Al Barsha, Dubai</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">8495823</td>
       <td data-label="Product ID">T83945</td>
       <td data-label="Product Name">Prink Bear</td>
       <td data-label="Quantity">03</td>
       <td data-label="Price">45.90</td>
       <td data-label="Customer ID">1033945</td>
       <td data-Label="Time">13:00</td>
       <td date-Label="Date">07/07/2022</td>
       <td data-label="Shipping Address">Business Bay</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">99203456</td>
       <td data-label="Product ID">M23968</td>
       <td data-label="Product Name">Patrick</td>
       <td data-label="Quantity">08</td>
       <td data-label="Price">200.00</td>
       <td data-label="Customer ID">9023563</td>
       <td data-Label="Time">18:00</td>
       <td date-Label="Date">10/09/20019</td>
       <td data-label="Shipping Address">Jumeirah Village Circle</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">3904562</td>
       <td data-label="Product ID">M20451</td>
       <td data-label="Product Name">Brown Grogu</td>
       <td data-label="Quantity">20</td>
       <td data-label="Price">280.00</td>
       <td data-label="Customer ID">9204514</td>
       <td data-Label="Time">12:10</td>
       <td date-Label="Date">11/11/2011</td>
       <td data-label="Shipping Address">Jumeirah Lakes and Towers</td>
       <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">1049356</td>
       <td data-label="Product ID">H20453</td>
       <td data-label="Product Name">Grey Cat</td>
       <td data-label="Quantity">06</td>
       <td data-label="Price">70.50</td>
       <td data-label="Customer ID">2047834</td>
       <td data-Label="Time">11:11</td>
       <td date-Label="Date">08/08/2016</td>
      <td data-label="Shipping Address">Reva Residences</td>
      <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">9384027</td>
       <td data-label="Product ID">M29400</td>
       <td data-label="Product Name">Poop</td>
       <td data-label="Quantity">10</td>
       <td data-label="Price">99.90</td>
       <td data-label="Customer ID">2947103</td>
       <td data-Label="Time">20:59</td>
       <td date-Label="Date">20/10/2020</td>
      <td data-label="Shipping Address">Dubailand</td>
      <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr>

     <tr>
       <td data-label="Order ID">1119377</td>
       <td data-label="Product ID">T00023</td>
       <td data-label="Product Name">Rainbow Bear</td>
       <td data-label="Quantity">30</td>
       <td data-label="Price">999.50</td>
       <td data-label="Customer ID">9000342</td>
       <td data-Label="Time">13:30</td>
       <td date-Label="Date">26/09/2003</td>
      <td data-label="Shipping Address">Majaz Waterfront</td>
      <td data-Label="Cancel Order"><img src="../images/cross.ico" style="width: 30%;"></td>
     </tr> -->

    </tbody>

  </table>

    <script type="module">

    let container = document.getElementById("displayTable");
    window.onload = init;

    //Downloads JSON description of Order from server
    function init() {
      //Create request object 
      let request = new XMLHttpRequest();

      //Create event handler that specifies what should happen when server responds
      request.onload = () => {
        //Check HTTP status code
        if (request.status === 200) {
          ;
          displayorder(request.responseText);
        }
        else
          alert("Error communicating with server: " + request.status);
      };


      //Set up request and send it

      request.open("GET", "../php/order.php");

      request.send();
    }

    function displayorder(jsonorder) {


      //Convert JSON to array of Order objects
      let OrderArray = JSON.parse(jsonorder);
      console.log(OrderArray);
      let htmlStr = "";

<<<<<<< Updated upstream
      //Create HTML div containing Order data
      for (let i = 0; i < OrderArray.length; i++) {
        htmlStr += '<form action="../php/remove.php" action="post" enctype="multipart/form-data">';
        htmlStr += '<tr>';
          htmlStr += '<td style="width:100px;" data-label="OrderID">' + OrderArray[i].customer_id.$oid + '</td>';
        htmlStr += '<td style="width:100px;" data-label="OrderID">' + OrderArray[i].OrderID + '</td>';
        // htmlStr += '<td data-label="Image"><img src="../' + OrderArray[i].image_url + '" style="width: 40%;"></td>';
        htmlStr += '<td data-label="Shipping Address">' + OrderArray[i].shipping_address + '</td>';
        htmlStr += '<td data-label="Date">' + OrderArray[i].date + '</td>';
        htmlStr += '<td data-label="Time">' + OrderArray[i].time + '</td>';
        htmlStr += '<td data-label="Price">' + OrderArray[i].price + '</td>';
        htmlStr += '<td data-label="Products">' + OrderArray[i].products + '</td>';

        //Hidden form to pass data to remove.php
        htmlStr += '<input type="hidden" id="id" name="id" value="'+OrderArray[i].OrderID+'">';
        htmlStr += '<input type="hidden" name="shipping_address" value="'+OrderArray[i].shipping_address+'">';
        htmlStr += '<input type="hidden" name="date" value="'+OrderArray[i].date+'">';
        htmlStr += '<input type="hidden" name="time" value="'+OrderArray[i].time+'">';
        htmlStr += '<input type="hidden" name="price" value="'+OrderArray[i].price+'">';
        htmlStr += '<input type="hidden" name="products" value="'+OrderArray[i].products+'">';
        htmlStr += '<td><button type="submit" name="cancelorder"> Delete</button></td>';
        htmlStr += '</form>';
         console.log( OrderArray[i]._id.$oid);
        // htmlStr += '<td data-Label="Cancel Order" class="cancel_Order" data-id="'+OrderArray[i]._id.$oid+'"><a HREF="">X</a></td>';
        htmlStr += '</tr>';
            }
=======
      // Create HTML tr containing Order data
for (let i = 0; i < OrderArray.length; i++) {
  htmlStr += '<tr>';
  htmlStr += '<td style="width:100px;" data-label="CustomerID">' + OrderArray[i].customer_id.$oid + '</td>';
  htmlStr += '<td style="width:100px;" data-label="OrderID">' + OrderArray[i].OrderID + '</td>';
  // htmlStr += '<td data-label="Image"><img src="../' + OrderArray[i].image_url + '" style="width: 40%;"></td>';
  htmlStr += '<td data-label="Shipping Address">' + OrderArray[i].shipping_address + '</td>';
  htmlStr += '<td data-label="Date">' + OrderArray[i].date + '</td>';
  htmlStr += '<td data-label="Time">' + OrderArray[i].time + '</td>';
  htmlStr += '<td data-label="Price">' + OrderArray[i].price + '</td>';
  htmlStr += '<td data-label="Products">' + OrderArray[i].products + '</td>';
  htmlStr += '<td>';
  htmlStr += '<form action="../php/remove.php" method="post" enctype="multipart/form-data">';

  // Hidden form to pass data to remove.php
  htmlStr += '<input type="hidden" id="OrderID" name="id" value="'+OrderArray[i].OrderID+'">';
  htmlStr += '<input type="hidden" name="shipping_address" value="'+OrderArray[i].shipping_address+'">';
  htmlStr += '<input type="hidden" name="date" value="'+OrderArray[i].date+'">';
  htmlStr += '<input type="hidden" name="time" value="'+OrderArray[i].time+'">';
  htmlStr += '<input type="hidden" name="price" value="'+OrderArray[i].price+'">';
  htmlStr += '<input type="hidden" name="products" value="'+OrderArray[i].products+'">';
  htmlStr += '<button type="submit"> Delete</button></form></td>';
  
  // htmlStr += '<td data-Label="Cancel Order" class="cancel_Order" data-id="'+OrderArray[i]._id.$oid+'"><a HREF="">X</a></td>';
  htmlStr += '</tr>';
}

container.innerHTML = htmlStr;
>>>>>>> Stashed changes
        
            

      container.innerHTML = htmlStr;
    //   var elements = document.getElementsByClassName("cancel_Order");

    //   for (var i = 0; i < elements.length; i++) {
    //     elements[i].addEventListener('click', removeOrder);
    //   }

    //   document.getElementsByClassName("cancel_Order").addEventListener("click", removeOrder);
    }


    // function removeOrder(selector) {

    //   var data = selector.currentTarget.dataset;

    //   let request = new XMLHttpRequest();

    //   //Create event handler that specifies what should happen when server responds
    //   request.onload = () => {
    //     //Check HTTP status code
        
    //     if (request.status === 200) {
    //       ;

    //     }
    //     else
    //       alert("Error communicating with server: " + request.status);
    //   };

    //   //Set up request and send it
    //   var data = {
    //     id: data.id

    //   };

    //   var id = data.id;
    //   request.open("POST", "../php/remove-product.php");

    //   request.send(id);
    // }




            // //Create event handler that specifies what should happen when server responds
            // request.onload = () => {
            //     //Check HTTP status code
                
            //     if (request.status === 200) {;
                  
            //     }
            //     else
            //         alert("Error communicating with server: " + request.status);
            // };


            // //Set up request and send it
            // var data={
            //   id:data.id

            // };

            // var id = data.id;
            // request.open("POST", "../php/remove-product.php");
                     
            // request.send(id);
        
  </script>



<script src='../JS/navigation.js'></script>


</body>
</html>